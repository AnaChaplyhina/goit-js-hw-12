import{a as A,S as P,i as c}from"./assets/vendor-C7oZ9Grx.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const x="11281296-1f4fc3f6c48856d743f19a161",B="https://pixabay.com/api/";async function w(e,t){const o={key:x,q:e,image_type:"photo",orientation:"horizontal",safesearch:!0,per_page:15,page:t},{data:r}=await A.get(B,{params:o});return r}const p=document.querySelector("#gallery"),g=document.querySelector("#loader"),l=document.querySelector("#load-more"),I=new P(".gallery a",{captionsData:"alt",captionDelay:250});function C(e){if(!Array.isArray(e)||e.length===0)return;const t=document.createDocumentFragment();for(let o=0;o<e.length;o+=1){const r=e[o],n=document.createElement("li");n.className="photo-card";const s=document.createElement("a");s.setAttribute("href",r.largeImageURL);const a=document.createElement("img");a.setAttribute("src",r.webformatURL),a.setAttribute("alt",T(r.tags||"")),a.setAttribute("loading","lazy"),s.appendChild(a),n.appendChild(s);const i=document.createElement("div");i.className="info",i.appendChild(m("Likes",r.likes)),i.appendChild(m("Views",r.views)),i.appendChild(m("Comments",r.comments)),i.appendChild(m("Downloads",r.downloads)),n.appendChild(i),t.appendChild(n)}p.appendChild(t),I.refresh()}function N(){p&&(p.innerHTML="")}function E(){g&&g.classList.remove("is-hidden")}function S(){g&&g.classList.add("is-hidden")}function O(){l&&l.classList.remove("is-hidden")}function v(){l&&l.classList.add("is-hidden")}function R(){const e=p?p.querySelector(".photo-card"):null;return e?e.getBoundingClientRect().height:0}function m(e,t){const o=document.createElement("p"),r=document.createElement("b");return r.textContent=e,o.appendChild(r),o.appendChild(document.createTextNode(String(t))),o}function T(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var d,u,b="",y=1,h=0,f=0;_(D);function D(){if(d=document.querySelector("#search-form"),u=d?d.elements.query:null,!d||!u){console.error("search form not found in DOM");return}d.addEventListener("submit",L),l&&l.addEventListener("click",M);var e=new URLSearchParams(window.location.search),t=e.get("query");t&&t.trim()&&(u.value=t.trim(),L(new Event("submit",{bubbles:!1,cancelable:!0})))}async function L(e){e&&typeof e.preventDefault=="function"&&e.preventDefault();var t=u?String(u.value).trim():"";if(v(),N(),f=0,h=0,y=1,!t){c.warning({message:"Введи ключове слово для пошуку.",position:"topRight"});return}b=t;try{E();const o=await w(b,y);if(!o||!o.hits||o.hits.length===0){c.info({message:"На жаль, нічого не знайдено. Спробуй інший запит.",position:"topRight"});return}h=Number(o.totalHits||0),C(o.hits),f+=o.hits.length,f<h?O():c.info({message:"We're sorry, but you've reached the end of search results.",position:"bottomCenter"})}catch(o){q(o),console.error(o)}finally{S()}}async function M(){y+=1;try{E();const t=await w(b,y);if(!t||!t.hits||t.hits.length===0){v(),c.info({message:"We're sorry, but you've reached the end of search results.",position:"bottomCenter"});return}C(t.hits),f+=t.hits.length;var e=R();e&&window.scrollBy({top:e*2,behavior:"smooth"}),f>=h&&(v(),c.info({message:"We're sorry, but you've reached the end of search results.",position:"bottomCenter"}))}catch(t){q(t),console.error(t)}finally{S()}}function q(e){var t="Unknown error";if(e&&e.code==="NO_PIXABAY_KEY")t="Pixabay API key is not set. Додай ключ у src/js/pixabay-api.js або в .env.local як VITE_PIXABAY_KEY.";else if(e&&e.response){var o=e.response.status,r=e.response.data&&e.response.data.message?e.response.data.message:e.response.statusText?e.response.statusText:"Request failed";t="HTTP "+o+": "+r}else e&&e.request?t="Network error: no response from server":e&&e.message&&(t=e.message);c.error({title:"Помилка",message:t,position:"topRight"})}function _(e){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}
//# sourceMappingURL=index.js.map
